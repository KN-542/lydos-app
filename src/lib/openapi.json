{"openapi":"3.0.0","info":{"version":"1.0.0","title":"Lydos API"},"components":{"schemas":{},"parameters":{}},"paths":{"/setting/plans":{"get":{"tags":["設定"],"summary":"プラン一覧取得","description":"利用可能なプラン一覧を取得します","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"plans":{"type":"array","items":{"type":"object","properties":{"id":{"type":"number","example":1},"name":{"type":"string","example":"無料プラン"},"description":{"type":"string","example":"基本的な機能が利用できます"},"price":{"type":"number","example":0},"isSelected":{"type":"boolean","example":false}},"required":["id","name","description","price","isSelected"]}}},"required":["plans"]}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/setting/checkout-session":{"post":{"tags":["設定"],"summary":"Checkout Session作成","description":"カード登録用のCheckout Sessionを作成します。","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"checkoutUrl":{"type":"string","description":"Stripe Checkout Session URL"}},"required":["checkoutUrl"]}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/setting/payment-methods":{"get":{"tags":["設定"],"summary":"支払い方法一覧取得","description":"登録済みの支払い方法一覧を取得します。","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"paymentMethods":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","description":"Payment Method ID"},"brand":{"type":"string","description":"Card brand (visa, mastercard, etc.)"},"last4":{"type":"string","description":"Last 4 digits of card"},"expMonth":{"type":"number","description":"Expiration month"},"expYear":{"type":"number","description":"Expiration year"},"isDefault":{"type":"boolean","description":"Whether this is the default payment method"}},"required":["id","brand","last4","expMonth","expYear","isDefault"]},"description":"List of payment methods"}},"required":["paymentMethods"]}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/setting/payment-methods/{paymentMethodId}":{"delete":{"tags":["設定"],"summary":"支払い方法削除","description":"指定した支払い方法を削除します。","parameters":[{"schema":{"type":"string","description":"Stripe Payment Method ID (pm_xxx)"},"required":true,"description":"Stripe Payment Method ID (pm_xxx)","name":"paymentMethodId","in":"path"}],"responses":{"204":{"description":"No Content"},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/setting/plan":{"post":{"tags":["設定"],"summary":"プラン変更","description":"支払い方法を指定してプランを変更します。","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"planId":{"type":"integer","minimum":0,"exclusiveMinimum":true,"description":"変更先プラン ID"},"paymentMethodId":{"type":"string","description":"Stripe Payment Method ID (pm_xxx)"}},"required":["planId","paymentMethodId"]}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}}}}